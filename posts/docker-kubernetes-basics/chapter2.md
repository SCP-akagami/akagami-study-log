---
title: 'Docker&Kubernetes きほんのきほん - 第2章Dockerが動く仕組み'
date: '2025-07-22'
tags: ['Docker&Kubernetesのきほんのきほん', 'Docker', 'コンテナ技術', '開発環境']
---

# Docker&Kubernetes きほんのきほん - 第2章Dockerが動く仕組み

## Docker が動く仕組み

- 普通のサーバであれば、OS上にプログラムやデータを直接載せるが、Dockerを使いたい場合は、OSの上にDocker Engineを載せ、その上でコンテナを動かす
- コンテナには必ず「Linux OSっぽいもの」が入っている
- OSとは、ソフトウェアなどプログラムの命令をハードウェアに伝える役割を担うもの
- Docker Engineの下にも土台となるLinux OSがあるのに、コンテナの中にもLinux OS（っぽいもの）が存在する。これがDockerの大きな特徴の1つ
  - 「カーネル」と呼ばれる角になる部分とその「周辺の部分」で構成
- 周辺部分だけを入れて、カーネルは土台に任せることで、Dockerの大きな特徴である「軽い」ことの理由にもなっている

## Docker Hub とイメージとコンテナ

- イメージはコンテナを作るための設計図のようなものであり、イメージがコンテナを作成して利用する
- コンテナからイメージを作ることも可能
- よく使われるようなイメージは既に用意されており、「Docker Hub」から入手可能
- Dockerの特徴的な使い方の１つ：「1コンテナ=1アプリ」
  - セキュリティ面や、メンテナンスのしやすさからこのような運用方法を選ぶことが多い

## Docker コンテナのライフサイクルとデータの保存

- コンテナには、「作って捨てる」という性質がある
- コンテナのライフサイクル
  - 作る
  - 起動する
  - 停止する
  - 破棄する
- 中に入っているデータは、Dockerをインストールしている物理的なマシン（ホスト）のディスクにマウントし、そこに保存する
  - マウント：つなげて書き込めるようにした状態

## Dockerのメリットとデメリット

### Dockerのメリット

- 隔離できる
  - 独立している
    - 複数載せられる
      - 同じアプリを入れられる
  - イメージ化できる
    - Dockerレジストリ（Docker Hub）
      - もらうだけ
        - 自分で作らなくていい
      - 入れ替えやすい
        - アップデートしやすい
        - ソフトを入れ替えやすい
    - 持ち運べる
      - 複製を作りやすい
        - 移行が楽
        - 開発環境を配布しやすい
  - カーネルがない
    - 軽い
    - ディストリビューションを変えられる

### Dockerのデメリット

- Linux用ソフトウェアしか対応していない
- 1つの物理的なマシンに、たくさんのサーバを載せてしまうため、その親となるマシンが駄目になってしまったら、すべてのコンテナが影響を受ける
  - レンタルサーバ、レンタルクラウド、仮想基盤でも同じ
- 複数のコンテナを使用することが前提なので、コンテナ1つだけを、長期に渡って使用する場合は、メリットに感じにくい

### Dockerの使い道

- 開発現場で、全員に同じ開発環境を提供する（=同じ環境を複数用意する）
- 新バージョンの実験に使う（=隔離されている性質を使う）
- 複数の同じサーバが必要な場合で便利（=独立している性質を使う）