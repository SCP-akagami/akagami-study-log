# コミットメッセージのルール

## 差分特化型コミットメッセージ作成の原則

このルールファイルは、チャット履歴や会話内容に影響されることなく、純粋にGit差分情報のみに基づいてコミットメッセージを作成することを目的として設計されています。これにより、一貫性があり、客観的で正確なコミットメッセージの生成が可能になります。

### チャット履歴を無視する理由
- **一貫性の確保**: 会話の文脈に左右されず、常に同じ基準でコミットメッセージを作成
- **客観性の維持**: 差分という事実のみに基づいた判断により、主観的な解釈を排除
- **正確性の向上**: 実際の変更内容と一致したコミットメッセージの生成
- **再現性の保証**: 同じ差分に対して、いつでも同様の品質のコミットメッセージを生成

## [1. 差分の取得と分析](.cursor/rules/commit_message.mdc#1)

差分の取得と分析は、客観的で正確なコミットメッセージ作成の基盤となります。Git差分コマンドを使用して得られる情報のみを使用することで、以下の利点があります：

- **変更内容の正確な把握**: 実際に変更されたファイルと行を確実に特定
- **変更の性質の判断**: 追加、削除、修正の種類を客観的に判断
- **影響範囲の特定**: 変更されたファイルから影響範囲を正確に把握
- **チャット文脈の排除**: 会話内容に影響されない純粋な差分分析

`git diff HEAD`と`git diff --staged`の両方を実行することで、ワーキングディレクトリとステージングエリアの変更を包括的に把握できます。

## [2. コミットメッセージは以下の形式で記述してください](.cursor/rules/commit_message.mdc#2)

コミットメッセージは、変更内容を明確に伝えるために重要な要素です。基本形式として、type、subject、bodyの3つの要素を組み合わせることで、変更の種類、内容、詳細な説明を効果的に伝えることができます。

この形式は、Conventional Commitsの仕様を参考にしており、自動化ツールとの互換性も考慮されています。

## [3. typeは以下のいずれかを使用してください](.cursor/rules/commit_message.mdc#3)

各タイプは、変更の性質を明確に示すために使用されます：

- feat: 新機能の追加は、プロジェクトの機能拡張を示します
- fix: バグ修正は、既存の機能の問題解決を示します
- docs: ドキュメントの変更は、コードベースの理解を助ける変更を示します
- style: スタイルの変更は、コードの可読性向上を示します
- refactor: リファクタリングは、コードの品質向上を示します
- test: テストの変更は、コードの信頼性向上を示します
- chore: その他の変更は、開発環境やツールの改善を示します

## [4. subjectは以下のルールに従ってください](.cursor/rules/commit_message.mdc#4)

サブジェクトは、変更内容を簡潔に伝えるために重要です：

- 日本語で「〜を追加」「〜を修正」などの形式を使用することで、変更の意図が明確になります
- 50文字以内の制限により、簡潔な説明が促されます
- 文末に句読点を付けないことで、一貫性が保たれます
- 動詞を後置することで自然な日本語表現になります

## [5. bodyは以下のフォーマットで記述してください](.cursor/rules/commit_message.mdc#5)

ボディは、シンプルなフォーマットを使用して変更の詳細な説明を提供します：

### 簡潔フォーマットの採用理由
- **可読性の向上**: 長すぎるコミットメッセージを避け、簡潔で読みやすい形式に
- **効率性の確保**: 必要最小限の情報で変更内容を伝達
- **メンテナンス性**: シンプルな構造により、継続的な運用が容易

### フォーマット構成
```
【変更内容】
- 具体的な変更点を箇条書きで記述
- 複数の変更がある場合は項目ごとに記述
```

### セクションの説明

#### 【変更内容】
- 何を変更したかを具体的に記述
- 技術的な詳細も含めて説明
- 複数ファイルの変更がある場合は、ファイルごとに整理
- 72文字以内で折り返し、簡潔に記述

## [6. コミットメッセージ作成の際は、以下の手順で進めてください](.cursor/rules/commit_message.mdc#6)

コミットメッセージの作成は、差分情報のみに基づいて以下の手順で行うことで、チャット履歴に影響されない一貫性のある品質の高いメッセージを作成できます：

1. **差分情報の取得と分析**
   - `git diff HEAD`と`git diff --staged`の両方を実行
   - **差分結果のみを情報源として**変更の範囲と影響を把握
   - チャット履歴や会話内容は完全に無視

2. **タイプの特定（差分ベース）**
   - **差分の内容のみから**変更の性質に応じた適切なタイプを選択
   - 新しいファイル追加 → feat、バグ修正コード → fix など、差分から客観的に判断
   - 複数のタイプが該当する場合は、差分の主要な変更を基準に選択

3. **サブジェクトの作成（差分ベース）**
   - **差分から読み取れる変更内容のみに基づいて**変更内容を簡潔に表現
   - 50文字以内に収める
   - 会話の文脈ではなく、実際のコード変更内容を反映

4. **簡潔なボディの記述（差分ベース）**
   - **差分情報のみから判断できる範囲で**【変更内容】を記述
   - 差分に含まれないコンテキストは推測せず、確実に判断できる範囲で記述
   - 72文字以内で折り返し、簡潔に記述 